<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pong Simples</title>
</head>
<body style="display:flex;justify-content:center;align-items:center;height:100vh;background:black;">
<canvas id="pong" width="600" height="400" style="border:2px solid white;"></canvas>
<script>
const canvas=document.getElementById("pong")
const ctx=canvas.getContext("2d")

let ball={x:300,y:200,r:10,speedX:4,speedY:4}
let player={x:10,y:150,w:10,h:100,score:0}
let ai={x:580,y:150,w:10,h:100,score:0}
let gameOver=false

function drawRect(x,y,w,h,color){ctx.fillStyle=color;ctx.fillRect(x,y,w,h)}
function drawCircle(x,y,r,color){ctx.fillStyle=color;ctx.beginPath();ctx.arc(x,y,r,0,Math.PI*2);ctx.closePath();ctx.fill()}
function drawText(text,x,y,color){ctx.fillStyle=color;ctx.font="30px Arial";ctx.fillText(text,x,y)}

function resetBall(){ball.x=300;ball.y=200;ball.speedX*=-1;ball.speedY=4*(Math.random()>0.5?1:-1)}

function update(){
    if(gameOver)return
    ball.x+=ball.speedX
    ball.y+=ball.speedY
    if(ball.y+ball.r>canvas.height||ball.y-ball.r<0)ball.speedY*=-1

    let playerCollision=ball.x-ball.r<player.x+player.w&&ball.y>player.y&&ball.y<player.y+player.h
    let aiCollision=ball.x+ball.r>ai.x&&ball.y>ai.y&&ball.y<ai.y+ai.h

    if(playerCollision){ball.speedX*=-1;ball.x=player.x+player.w+ball.r}
    if(aiCollision){ball.speedX*=-1;ball.x=ai.x-ball.r}

    if(ball.x-ball.r<0){ai.score++;resetBall()}
    if(ball.x+ball.r>canvas.width){player.score++;resetBall()}

    if(player.score>=5||ai.score>=5){gameOver=true}

    let aiCenter=ai.y+ai.h/2
    if(aiCenter<ball.y-35)ai.y+=4
    else if(aiCenter>ball.y+35)ai.y-=4
}

function render(){
    drawRect(0,0,canvas.width,canvas.height,"black")
    drawRect(player.x,player.y,player.w,player.h,"white")
    drawRect(ai.x,ai.y,ai.w,ai.h,"white")
    drawCircle(ball.x,ball.y,ball.r,"white")
    drawText(player.score,200,50,"white")
    drawText(ai.score,370,50,"white")

    if(gameOver){
        ctx.font="40px Arial"
        ctx.fillStyle="yellow"
        ctx.fillText(player.score>ai.score?"Você venceu!":"Computador venceu!",170,200)
        ctx.font="20px Arial"
        ctx.fillStyle="white"
        ctx.fillText("Recarregue a página para jogar novamente",130,240)
    }
}

function game(){
    update()
    render()
}

setInterval(game,1000/60)

window.addEventListener("mousemove",e=>{
    let rect=canvas.getBoundingClientRect()
    player.y=e.clientY-rect.top-player.h/2
})
</script>
</body>
</html>
